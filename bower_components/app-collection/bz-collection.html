<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="../app-wrapper/bz-wrapper.html">
<link rel="import" href="../iron-flex-layout/iron-flex-layout-classes.html">

<dom-module id="bz-collection">
    <template>
        <style is="custom-style" include="iron-flex iron-flex-alignment iron-positioning">

           .container {
               background-color: #435F7A;
               width: 100%;
           }

           bz-wrapper {
               width: 100%;
               margin-left: auto;
               margin-right: auto;
               display: block;
           }

        </style>
        <div class="container">
            <template id="appCollectionDom" is="dom-repeat" items="{{appCollectionJson}}">
                <bz-wrapper app-info="{{item}}" on-change-active="_handleActivation"></bz-wrapper>
            </template>
        </div>
    </template>
    <script>
        Polymer({
            is: "bz-collection",

            properties:{
                appCollectionJson: {
                    type: Array/Object
                },
                activeObject: {
                    type:Object,
                    value: undefined
                },

                route: Object
            },

            _handleActivation: function(e){
                if(this.activeObject !== undefined){
                    this.activeObject.activated = false;
                }
                this.activeObject = Polymer.dom(e).rootTarget;
                this.set("route.path", "/" + e.target.appInfo.name.toLocaleLowerCase());
            },

            setAppActive: function(position) {
                var app = Polymer.dom(this.root).querySelectorAll("bz-wrapper")[position];
                app.click();
            }
        })
    </script>
</dom-module>
